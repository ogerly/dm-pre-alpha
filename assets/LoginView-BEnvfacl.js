import{b as _,a as g,r as Y,I as G,J as Q,c as I,p as U,K as O,s as Z,e as C,o as x,f as n,y as V,L as N,M as ee,q as te,g as F,h as B,w as q,m as ae,l as L,t as D,n as j,v as se,N as oe,O as re,k as T,u as ne,j as le}from"./vendor-nfeM4UEA.js";import{e as z,_ as H,a as ie}from"./index-D2_YXTeT.js";const ue=_({__name:"ParticlesBg",props:{color:{default:"#FFF"},quantity:{default:100},staticity:{default:50},ease:{default:50},class:{default:""}},setup(o){const t=o,i=g(null),u=g(null),r=g(null),m=g([]),v=Y({x:0,y:0}),c=Y({w:0,h:0}),{x:S,y:d}=G(),{pixelRatio:p}=Q(),P=I(()=>{let e=t.color.replace(/^#/,"");e.length===3&&(e=e.split("").map(b=>b+b).join(""));const f=parseInt(e,16),h=f>>16&255,w=f>>8&255,y=f&255;return`${h} ${w} ${y}`});U(()=>{i.value&&(r.value=i.value.getContext("2d")),a(),X(),window.addEventListener("resize",a)}),O(()=>{window.removeEventListener("resize",a)}),Z([S,d],()=>{s()});function a(){l(),R()}function s(){if(i.value){const e=i.value.getBoundingClientRect(),{w:f,h}=c,w=S.value-e.left-f/2,y=d.value-e.top-h/2;w<f/2&&w>-f/2&&y<h/2&&y>-h/2&&(v.x=w,v.y=y)}}function l(){u.value&&i.value&&r.value&&(m.value.length=0,c.w=u.value.offsetWidth,c.h=u.value.offsetHeight,i.value.width=c.w*p.value,i.value.height=c.h*p.value,i.value.style.width=c.w+"px",i.value.style.height=c.h+"px",r.value.scale(p.value,p.value))}function k(){const e=Math.floor(Math.random()*c.w),f=Math.floor(Math.random()*c.h),h=0,w=0,y=Math.floor(Math.random()*2)+1,b=0,E=parseFloat((Math.random()*.6+.1).toFixed(1)),A=(Math.random()-.5)*.2,J=(Math.random()-.5)*.2,K=.1+Math.random()*4;return{x:e,y:f,translateX:h,translateY:w,size:y,alpha:b,targetAlpha:E,dx:A,dy:J,magnetism:K}}function M(e,f=!1){if(r.value){const{x:h,y:w,translateX:y,translateY:b,size:E,alpha:A}=e;r.value.translate(y,b),r.value.beginPath(),r.value.arc(h,w,E,0,2*Math.PI),r.value.fillStyle=`rgba(${P.value.split(" ").join(", ")}, ${A})`,r.value.fill(),r.value.setTransform(p.value,0,0,p.value,0,0),f||m.value.push(e)}}function $(){r.value&&r.value.clearRect(0,0,c.w,c.h)}function R(){$();const e=t.quantity;for(let f=0;f<e;f++){const h=k();M(h)}}function W(e,f,h,w,y){const b=(e-f)*(y-w)/(h-f)+w;return b>0?b:0}function X(){$(),m.value.forEach((e,f)=>{const w=[e.x+e.translateX-e.size,c.w-e.x-e.translateX-e.size,e.y+e.translateY-e.size,c.h-e.y-e.translateY-e.size].reduce((b,E)=>Math.min(b,E)),y=parseFloat(W(w,0,20,0,1).toFixed(2));if(y>1?(e.alpha+=.02,e.alpha>e.targetAlpha&&(e.alpha=e.targetAlpha)):e.alpha=e.targetAlpha*y,e.x+=e.dx,e.y+=e.dy,e.translateX+=(v.x/(t.staticity/e.magnetism)-e.translateX)/t.ease,e.translateY+=(v.y/(t.staticity/e.magnetism)-e.translateY)/t.ease,e.x<-e.size||e.x>c.w+e.size||e.y<-e.size||e.y>c.h+e.size){m.value.splice(f,1);const b=k();M(b)}else M({...e,x:e.x,y:e.y,translateX:e.translateX,translateY:e.translateY,alpha:e.alpha},!0)}),window.requestAnimationFrame(X)}return(e,f)=>(x(),C("div",{ref_key:"canvasContainerRef",ref:u,class:V(e.$props.class),"aria-hidden":"true"},[n("canvas",{ref_key:"canvasRef",ref:i},null,512)],2))}}),de=_({__name:"Sparkles",props:{background:{default:"#0d47a1"},particleColor:{default:"#ffffff"},minSize:{default:1},maxSize:{default:3},speed:{default:4},particleDensity:{default:120}},setup(o){const t=o,i=g(null),u=g(null),r=g([]),m=g(null);function v(){if(!u.value||!i.value)return;const a=window.devicePixelRatio||1,s=i.value.getBoundingClientRect();u.value.width=s.width*a,u.value.height=s.height*a,m.value&&m.value.scale(a,a)}function c(){const a=[],s=t.particleDensity;for(let l=0;l<s;l++){const M=Math.random()*.3+.7;a.push({x:Math.random()*100,y:Math.random()*100,size:Math.random()*(t.maxSize-t.minSize)+t.minSize,opacity:Math.random()*.5+.3,vx:(Math.random()-.5)*.05*M*t.speed,vy:((Math.random()-.5)*.05-.05*.3)*M*t.speed,phase:Math.random()*Math.PI*2,phaseSpeed:.015})}r.value=a}function S(){if(!m.value||!u.value)return;const a=u.value;m.value.clearRect(0,0,a.width,a.height),r.value=r.value.map(s=>{let l=s.x+s.vx,k=s.y+s.vy;l<-2&&(l=102),l>102&&(l=-2),k<-2&&(k=102),k>102&&(k=-2);const M=(s.phase+s.phaseSpeed)%(Math.PI*2),$=.3+(Math.sin(M)*.3+.3);return m.value.beginPath(),m.value.arc(l*a.width/100,k*a.height/100,s.size,0,Math.PI*2),m.value.fillStyle=`${t.particleColor}${Math.floor($*255).toString(16).padStart(2,"0")}`,m.value.fill(),{...s,x:l,y:k,phase:M,opacity:$}})}const{pause:d,resume:p}=N(S,{immediate:!1});let P;return U(()=>{u.value&&(m.value=u.value.getContext("2d"),v(),c(),P=new ResizeObserver(v),i.value&&P.observe(i.value),p())}),O(()=>{d(),P&&i.value&&P.unobserve(i.value)}),(a,s)=>(x(),C("div",{ref_key:"containerRef",ref:i,class:"relative size-full overflow-hidden will-change-transform",style:ee({background:a.background})},[n("canvas",{ref_key:"canvasRef",ref:u,class:"absolute inset-0 size-full"},null,512)],4))}});function ce(o){const t=g(!1),i=g(!1),u=g(""),r={debug:(a,s)=>z.debug(a,{component:o,...s}),info:(a,s)=>z.info(a,{component:o,...s}),warn:(a,s)=>z.warn(a,{component:o,...s}),error:(a,s,l)=>z.error(a,s,{component:o,...l}),track:(a,s)=>z.track(a,{component:o,...s})};return U(()=>{z.trackComponentMount(o)}),te(()=>{z.trackComponentUnmount(o)}),{isLoading:t,hasError:i,errorMessage:u,errorLogger:r,trackAsyncOperation:async(a,s)=>{t.value=!0,i.value=!1,u.value="";try{r.debug(`Starting operation: ${a}`);const l=await s();return r.debug(`Successfully completed: ${a}`),l}catch(l){throw i.value=!0,u.value=l.message||"An error occurred",r.error(`Operation failed: ${a}`,l),l}finally{t.value=!1}},trackChatConnection:(a,s=null,l={})=>{a==="connected"?r.info(`Chat connected with socket ID: ${s}`,{category:"chat-connection",socketId:s,...l}):r.warn("Chat disconnected",{category:"chat-connection",lastSocketId:s,...l})},trackChatMessage:(a,s,l=!0)=>{const k=a==="sent"?"Sent message":"Received message";l?r.debug(`${k}`,{category:"chat-message",type:a,messageId:s.id||"unknown",timestamp:s.timestamp||new Date().toISOString(),recipientId:s.to||"all",senderId:s.from||"unknown"}):r.warn(`Failed to ${a} message`,{category:"chat-message",type:a,message:s,error:"Message could not be processed"})},trackSignaling:(a,s,l={})=>{r.debug(`WebRTC signaling: ${a}`,{category:"webrtc",type:a,peerId:s,...l})},trackRoomEvent:(a,s,l={})=>{r.info(`Room ${a}: ${s}`,{category:"chat-room",event:a,roomId:s,...l})},trackChatError:(a,s,l={})=>{r.error(`Chat error in ${a}`,s,{category:"chat-error",context:a,...l}),i.value=!0,u.value=s.message||`Error in chat ${a}`},trackUserStatus:(a,s)=>{r.debug(`User ${a} is now ${s}`,{category:"chat-user-status",userId:a,status:s})}}}const me=_({name:"LoginPage",components:{ParticlesBg:ue,Sparkles:de},setup(){const o=ne(),t=ie(),{errorLogger:i}=ce("LoginPage"),u=g(""),r=g(""),m=g(!1),v=g(""),c=g(!1),S=g(!1),d=g(""),p=g(""),P=()=>(d.value="",u.value?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.value)?!0:(d.value="Please enter a valid email address",!1):(d.value="Email is required",!1)),a=()=>(p.value="",r.value?r.value.length<6?(p.value="Password must be at least 6 characters",!1):!0:(p.value="Password is required",!1)),s=I(()=>u.value&&r.value&&!d.value&&!p.value);return{email:u,password:r,rememberMe:m,error:v,isLoading:c,showPassword:S,emailError:d,passwordError:p,isFormValid:s,validateEmail:P,validatePassword:a,handleLogin:async()=>{if(c.value)return;const M=P(),$=a();if(!(!M||!$)){v.value="",c.value=!0;try{i.debug("Attempting login",{email:u.value}),await t.login(u.value,r.value,m.value),i.info("Login successful"),o.push(o.currentRoute.value.query.redirect||"/")}catch(R){i.error("Login failed",R),v.value=R.message||"Failed to sign in. Please check your credentials."}finally{c.value=!1}}},fillTestCredentials:()=>{u.value="test@example.com",r.value="test123",d.value="",p.value=""}}}}),fe={class:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 relative overflow-hidden"},ge={class:"max-w-md w-full space-y-8 p-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg z-10 relative"},ve={class:"text-center relative"},pe={key:0,class:"bg-red-50 dark:bg-red-900/30 p-4 rounded-md"},he={class:"text-sm text-red-800 dark:text-red-300"},we={class:"mt-1"},ye={key:0,class:"mt-1 text-sm text-red-600"},be={class:"mt-1 relative"},ke=["type"],xe={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},Me={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},Ce={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},Pe={key:0,class:"mt-1 text-sm text-red-600"},Se={class:"flex items-center justify-between"},$e={class:"flex items-center"},ze=["disabled"],Ee={key:0,class:"flex items-center"},Re={key:1},Le={class:"mt-4"},Ve={class:"text-center text-sm"},Be={class:"text-gray-600 dark:text-gray-400"};function _e(o,t,i,u,r,m){const v=B("ParticlesBg"),c=B("Sparkles"),S=B("router-link");return x(),C("div",fe,[F(v,{class:"absolute inset-0 z-0"}),n("div",ge,[n("div",ve,[F(c,null,{default:q(()=>t[8]||(t[8]=[n("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white"}," DreamMall ",-1)])),_:1}),t[9]||(t[9]=n("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," Sign in to your account ",-1))]),n("form",{class:"mt-8 space-y-6",onSubmit:t[7]||(t[7]=ae((...d)=>o.handleLogin&&o.handleLogin(...d),["prevent"]))},[o.error?(x(),C("div",pe,[n("p",he,D(o.error),1)])):L("",!0),n("div",null,[t[10]||(t[10]=n("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Email address ",-1)),n("div",we,[j(n("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=d=>o.email=d),name:"email",type:"email",autocomplete:"email",required:"",class:V(["appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":o.emailError}]),placeholder:"you@example.com",onBlur:t[1]||(t[1]=(...d)=>o.validateEmail&&o.validateEmail(...d))},null,34),[[se,o.email]]),o.emailError?(x(),C("p",ye,D(o.emailError),1)):L("",!0)])]),n("div",null,[t[11]||(t[11]=n("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Password ",-1)),n("div",be,[j(n("input",{id:"password","onUpdate:modelValue":t[2]||(t[2]=d=>o.password=d),name:"password",type:o.showPassword?"text":"password",autocomplete:"current-password",required:"",class:V(["appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",{"border-red-500":o.passwordError}]),placeholder:"••••••••",onBlur:t[3]||(t[3]=(...d)=>o.validatePassword&&o.validatePassword(...d))},null,42,ke),[[oe,o.password]]),n("button",{type:"button",class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",onClick:t[4]||(t[4]=d=>o.showPassword=!o.showPassword)},[(x(),C("svg",{xmlns:"http://www.w3.org/2000/svg",class:V(["h-5 w-5",o.showPassword?"text-blue-500":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o.showPassword?(x(),C("path",xe)):(x(),C("path",Me)),o.showPassword?L("",!0):(x(),C("path",Ce))],2))]),o.passwordError?(x(),C("p",Pe,D(o.passwordError),1)):L("",!0)])]),n("div",Se,[n("div",$e,[j(n("input",{id:"remember-me","onUpdate:modelValue":t[5]||(t[5]=d=>o.rememberMe=d),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"},null,512),[[re,o.rememberMe]]),t[12]||(t[12]=n("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900 dark:text-gray-300"}," Remember me ",-1))]),t[13]||(t[13]=n("div",{class:"text-sm"},[n("a",{href:"#",class:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400"}," Forgot your password? ")],-1))]),n("div",null,[n("button",{type:"submit",disabled:o.isLoading||!o.isFormValid,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[o.isLoading?(x(),C("span",Ee,t[14]||(t[14]=[n("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),T(" Signing in... ")]))):(x(),C("span",Re,"Sign in"))],8,ze)]),n("div",Le,[t[15]||(t[15]=n("p",{class:"text-sm text-center text-gray-500 mb-2"}," Or use test account ",-1)),n("button",{type:"button",class:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:t[6]||(t[6]=(...d)=>o.fillTestCredentials&&o.fillTestCredentials(...d))}," Test User (test@example.com) ")]),n("div",Ve,[n("p",Be,[t[17]||(t[17]=T(" Don't have an account? ")),F(S,{to:"/register",class:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400"},{default:q(()=>t[16]||(t[16]=[T(" Sign up ")])),_:1})])])],32)])])}const Ae=H(me,[["render",_e]]),Fe=_({name:"LoginView",components:{LoginPage:Ae}});function De(o,t,i,u,r,m){const v=B("LoginPage");return x(),le(v)}const Ue=H(Fe,[["render",De]]);export{Ue as default};
